<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>College-to-Career Prep Survey</title>
  <style>
    :root {
      --bg: #ffffff;
      --panel: #ffffff;
      --muted: #5f5f5f;
      --text: #1a1a1a;
      --accent: #bf5700; /* burnt orange */
      --border: #d6d6d6;
      --chip: #f5f5f5;
    }
    * { box-sizing: border-box; }
    body {
      margin:0; padding:24px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial;
      background: var(--bg);
      color: var(--text);
    }
    .wrap { max-width: 900px; margin: 0 auto; }
    .card { background: #ffffff; border: 1px solid var(--border); border-radius: 18px; padding: 22px; }
    header h1 { margin: 0 0 6px; font-size: 28px; color: var(--accent); }
    header p { margin:0; color: var(--muted); }
    fieldset { border: 1px solid var(--border); border-radius: 14px; padding: 16px; margin: 0 0 14px; }
    legend { color: var(--accent); font-weight: 700; padding: 0 6px; }
    .q { margin-top: 8px; }
    .q .prompt { font-weight: 600; margin-bottom: 8px; }
    .opt { display: grid; grid-template-columns: 22px 1fr; gap: 10px; align-items: start; padding: 8px 10px; border-radius: 10px; border: 1px solid transparent; }
    .opt:hover { background: #fff4ec; border-color: var(--accent); }
    .controls { display:flex; flex-wrap:wrap; gap:10px; margin-top:16px; }
    button, .btn-link { border: 1px solid var(--border); background: #ffffff; color: var(--text); padding: 10px 14px; border-radius: 12px; cursor: pointer; font-weight: 700; }
    button.primary { border-color: var(--accent); background: var(--accent); color: white; }
    .results { margin-top: 18px; }
    .group { margin-top: 18px; }
    .group h4 { margin: 0 0 10px; color: var(--accent); }
    .link { display:block; padding:12px 14px; border:1px solid var(--border); border-radius:14px; margin-bottom:10px; text-decoration:none; color:var(--accent); font-weight:600; }
    .link:hover { border-color: var(--accent); background:#fff4ec; }
    .hr { height: 1px; background: var(--border); border:0; margin: 18px 0; }
    .muted { color: var(--muted); }
    .pill { display:inline-block; border:1px solid var(--border); border-radius:999px; padding:3px 8px; font-size:11px; margin-left:6px; background:#fff4ec; color:var(--accent); }
  </style>
</head>
<body>
  <div class="wrap">
    <header style="margin:0 0 18px 0">
      <h1>College-to-Career Prep Survey</h1>
      <p>Answer a few questions and get a personalized set of Canvas resources.</p>
    </header>

    <main>
      <section class="card">
        <form id="surveyForm"></form>
        <div class="controls">
          <button class="primary" id="submitBtn" form="surveyForm">See My Personalized Links</button>
          <button type="button" id="resetBtn">Reset</button>
          <button type="button" id="copyBtn">Copy Links</button>
          <button type="button" id="downloadBtn">Download CSV</button>
        </div>
        <div class="results" id="results"></div>
      </section>
    </main>
  </div>

<script>
// ================= CONFIG =================
const config = {
  questions: [
    {
      id: 'year',
      type: 'single',
      legend: 'Academic Year',
      text: 'What year are you?',
      options: [
        { value: 'freshman', label: 'First year / Freshman' },
        { value: 'sophomore', label: 'Second year / Sophomore' },
        { value: 'junior', label: 'Third year / Junior' },
        { value: 'senior', label: 'Fourth year / Senior' }
      ]
    },
    {
      id: 'pathway',
      type: 'single',
      legend: 'Career Direction After Graduation',
      text: 'Which path best matches your current interests after graduation?',
      options: [
        { value: 'health', label: 'Health professions (pre-health)' },
        { value: 'law', label: 'Law school / legal careers' },
        { value: 'grad', label: 'Graduate school (MA/PhD or related programs)' },
        { value: 'research', label: 'Research, data, or analytics' },
        { value: 'unsure', label: "I'm still exploring my options" }
      ]
    },
    {
      id: 'materials',
      type: 'matrix',
      legend: 'Professional Materials & Readiness',
      text: 'For each item, how confident do you feel right now?',
      rows: [
        { id: 'resume_ok', label: 'Resume' },
        { id: 'cover_ok', label: 'Cover letter' },
        { id: 'interview_ok', label: 'Interviewing' },
        { id: 'network_ok', label: 'Networking & career events' },
        { id: 'jobsearch_ok', label: 'Internship & job search strategies' }
      ],
      cols: [
        { value: 'confident', label: 'Confident' },
        { value: 'not_confident', label: 'Needs improvement' }
      ]
    },
    {
      id: 'research_interest',
      type: 'single',
      legend: 'Research & Academic Engagement',
      text: 'How interested are you in research, academic work, or further study?',
      options: [
        { value: 'research', label: 'I want to get involved in research' },
        { value: 'grad_teach', label: 'I’m considering graduate school or teaching' },
        { value: 'no', label: 'Not focused on research or grad school right now' }
      ]
    },
    {
      id: 'skills',
      type: 'multi',
      legend: 'Skills & Self-Development',
      text: 'Which areas would you like to strengthen? (Select all that apply)',
      options: [
        { value: 'strengths', label: 'Understanding my strengths' },
        { value: 'marketing_degree', label: 'Marketing my sociology degree' },
        { value: 'transferable_skills', label: 'Identifying my transferable skills' },
        { value: 'success', label: 'Academic skills and strategies for success' },
        { value: 'general_resources', label: 'General college and career resources' },
        { value: 'social_sciences_stem', label: 'Connecting social sciences with STEM' }
      ]
    },
    {
      id: 'planning',
      type: 'single',
      legend: 'Exploration & Planning',
      text: 'What type of guidance would help you most right now?',
      options: [
        { value: 'options', label: 'Exploring options and understanding possibilities' },
        { value: 'experience', label: 'Building experience (research, internships, networking, career fair)' },
        { value: 'programs', label: 'Planning and preparing for specific programs (grad/health/law)' }
      ]
    }
  ],

  links: {
    // Academic year specific pages
    year: {
      freshman: { label: 'First Year', url: 'https://utexas.instructure.com/courses/1365574/pages/first-year' },
      sophomore: { label: 'Second Year', url: 'https://utexas.instructure.com/courses/1365574/pages/second-year' },
      junior: { label: 'Third Year', url: 'https://utexas.instructure.com/courses/1365574/pages/third-year' },
      senior: { label: 'Fourth Year', url: 'https://utexas.instructure.com/courses/1365574/pages/fourth-year' }
    },

    // Core general planning resources
    core: {
      career_exploration: {
        label: 'Career Exploration',
        url: 'https://utexas.instructure.com/courses/1365574/pages/career-exploration'
      },
      game_plan: {
        label: 'Game Plan',
        url: 'https://utexas.instructure.com/courses/1365574/pages/game-plan'
      },
      general_resources: {
        label: 'General Resources',
        url: 'https://utexas.instructure.com/courses/1365574/pages/general-resources'
      },
      strategies_for_success: {
        label: 'Strategies for Success',
        url: 'http://utexas.instructure.com/courses/1365574/pages/strategies-for-success'
      }
    },

    // Pathway-based links (after graduation interests)
    pathways: {
      health: [
        {
          label: 'Exploring and Preparing for Health Professions',
          url: 'https://utexas.instructure.com/courses/1365574/pages/exploring-and-preparing-for-health-professions-2'
        }
      ],
      law: [
        {
          label: 'Exploring and Preparing for Law School',
          url: 'https://utexas.instructure.com/courses/1365574/pages/exploring-and-preparing-for-law-school'
        }
      ],
      grad: [
        {
          label: 'Exploring and Preparing for Graduate School',
          url: 'https://utexas.instructure.com/courses/1365574/pages/exploring-and-preparing-for-graduate-school'
        }
      ],
      research: [
        {
          label: 'How to Get Involved in Research',
          url: 'https://utexas.instructure.com/courses/1365574/pages/how-to-get-involved-in-research'
        },
        {
          label: 'What is Research?',
          url: 'https://utexas.instructure.com/courses/1365574/pages/what-is-research'
        },
        {
          label: 'What Do I Get from Research?',
          url: 'https://utexas.instructure.com/courses/1365574/pages/what-do-i-get-from-research'
        },
        {
          label: 'Skills from Sociology in Research',
          url: 'https://utexas.instructure.com/courses/1365574/pages/skills-from-sociology-in-research'
        }
      ],
      unsure: [
        {
          label: 'Career Exploration',
          url: 'https://utexas.instructure.com/courses/1365574/pages/career-exploration'
        },
        {
          label: 'Game Plan',
          url: 'https://utexas.instructure.com/courses/1365574/pages/game-plan'
        },
        {
          label: 'General Resources',
          url: 'https://utexas.instructure.com/courses/1365574/pages/general-resources'
        },
        {
          label: 'Transferable Skills',
          url: 'https://utexas.instructure.com/courses/1365574/pages/transferable-skills-2'
        }
      ]
    },

    // Professional materials & career tools
    materials: {
      resume: {
        label: 'Resume',
        url: 'https://utexas.instructure.com/courses/1365574/pages/resume'
      },
      cover: {
        label: 'Cover Letters',
        url: 'https://utexas.instructure.com/courses/1365574/pages/cover-letters'
      },
      interview: [
        {
          label: 'Interview Preparation and What to Expect',
          url: 'https://utexas.instructure.com/courses/1365574/pages/interview-preparation-and-what-to-expect-day-of'
        }
      ],
      networking: [
        {
          label: 'Networking and Informational Interviews',
          url: 'https://utexas.instructure.com/courses/1365574/pages/networking-and-informational-interviews'
        },
        {
          label: 'Career Fair',
          url: 'https://utexas.instructure.com/courses/1365574/pages/career-fair'
        }
      ],
      jobsearch: [
        {
          label: 'Internship/Job Search Strategies',
          url: 'https://utexas.instructure.com/courses/1365574/pages/internship-slash-job-search-strategies'
        }
      ]
    },

    // Self-development & skills
    selfdev: {
      strengths: {
        label: 'Strengths',
        url: 'https://utexas.instructure.com/courses/1365574/pages/strengths'
      },
      marketing_degree: {
        label: 'Marketing Your Sociology Degree',
        url: 'https://utexas.instructure.com/courses/1365574/pages/marketing-your-sociology-degree'
      },
      transferable_skills: {
        label: 'Transferable Skills',
        url: 'https://utexas.instructure.com/courses/1365574/pages/transferable-skills-2'
      },
      success: {
        label: 'Strategies for Success',
        url: 'http://utexas.instructure.com/courses/1365574/pages/strategies-for-success'
      },
      general_resources: {
        label: 'General Resources',
        url: 'https://utexas.instructure.com/courses/1365574/pages/general-resources'
      },
      social_sciences_stem: {
        label: 'Social Sciences and STEM',
        url: 'https://utexas.instructure.com/courses/1365574/pages/social-sciences-and-stem'
      }
    },

    // Exploration & planning – what type of help they want
    exploration: {
      options: [
        {
          label: 'Career Exploration',
          url: 'https://utexas.instructure.com/courses/1365574/pages/career-exploration'
        },
        {
          label: 'Game Plan',
          url: 'https://utexas.instructure.com/courses/1365574/pages/game-plan'
        }
      ],
      experience: [
        {
          label: 'Networking and Informational Interviews',
          url: 'https://utexas.instructure.com/courses/1365574/pages/networking-and-informational-interviews'
        },
        {
          label: 'Career Fair',
          url: 'https://utexas.instructure.com/courses/1365574/pages/career-fair'
        },
        {
          label: 'Internship/Job Search Strategies',
          url: 'https://utexas.instructure.com/courses/1365574/pages/internship-slash-job-search-strategies'
        }
      ],
      programs: [
        {
          label: 'Exploring and Preparing for Graduate School',
          url: 'https://utexas.instructure.com/courses/1365574/pages/exploring-and-preparing-for-graduate-school'
        },
        {
          label: 'Exploring and Preparing for Health Professions',
          url: 'https://utexas.instructure.com/courses/1365574/pages/exploring-and-preparing-for-health-professions-2'
        },
        {
          label: 'Exploring and Preparing for Law School',
          url: 'https://utexas.instructure.com/courses/1365574/pages/exploring-and-preparing-for-law-school'
        }
      ]
    }
  }
};
// ================= END CONFIG =================


// ----------- Form Rendering --------------
const formEl = document.getElementById('surveyForm');
const resultsEl = document.getElementById('results');

function renderForm(){
  formEl.innerHTML = '';
  config.questions.forEach(q => {
    const fs = document.createElement('fieldset');
    const lg = document.createElement('legend');
    lg.textContent = q.legend;
    fs.appendChild(lg);

    const div = document.createElement('div');
    div.className = 'q';

    const label = document.createElement('label');
    label.className = 'prompt';
    label.textContent = q.text;
    div.appendChild(label);

    if(q.type === 'single' || q.type === 'multi'){
      q.options.forEach((opt, idx)=>{
        const id = `${q.id}_${idx}`;
        const row = document.createElement('label');
        row.className = 'opt';
        const input = document.createElement('input');
        input.type = q.type === 'multi' ? 'checkbox':'radio';
        input.name = q.id;
        input.value = opt.value;
        input.id = id;
        const span = document.createElement('span');
        span.textContent = opt.label;
        row.appendChild(input);
        row.appendChild(span);
        div.appendChild(row);
      });
    } else if(q.type === 'matrix'){
      const table = document.createElement('table');
      table.style.width='100%';
      table.style.borderCollapse='collapse';

      const thead = document.createElement('thead');
      const trh = document.createElement('tr');
      trh.appendChild(document.createElement('th'));
      q.cols.forEach(c=>{
        const th=document.createElement('th');
        th.style.padding='6px';
        th.textContent=c.label;
        trh.appendChild(th);
      });
      thead.appendChild(trh);
      table.appendChild(thead);

      const tbody=document.createElement('tbody');
      q.rows.forEach((r,ridx)=>{
        const tr=document.createElement('tr');
        const tdLabel=document.createElement('td');
        tdLabel.textContent=r.label;
        tr.appendChild(tdLabel);

        q.cols.forEach((c,cidx)=>{
          const td=document.createElement('td');
          const id=`${q.id}_${r.id}_${cidx}`;
          const input=document.createElement('input');
          input.type='radio';
          input.name=r.id;
          input.value=c.value;
          input.id=id;
          td.appendChild(input);
          tr.appendChild(td);
        });

        tbody.appendChild(tr);
      });
      table.appendChild(tbody);
      div.appendChild(table);
    }

    fs.appendChild(div);
    formEl.appendChild(fs);
  });
}
renderForm();


// ----------- Collect Answers --------------
function getAnswers(){
  const data={};
  config.questions.forEach(q=>{
    if(q.type === 'single'){
      const el = document.querySelector(`[name="${q.id}"]:checked`);
      data[q.id] = el ? el.value : null;
    } else if(q.type === 'multi'){
      const els=[...document.querySelectorAll(`[name="${q.id}"]`)].filter(x=>x.checked);
      data[q.id]=els.map(e=>e.value);
    } else if(q.type === 'matrix'){
      data[q.id]={};
      q.rows.forEach(r=>{
        const el=document.querySelector(`[name="${r.id}"]:checked`);
        data[q.id][r.id]=el? el.value:null;
      });
    }
  });
  return data;
}


// ----------- Build Recommendations --------------
function buildRecommendations(answers){
  const groups={};

  // Academic year
  if(answers.year && config.links.year[answers.year]?.url){
    groups['Academic Year']=[config.links.year[answers.year]];
  }

  // Core planning – always helpful
  groups['Getting Started'] = [
    config.links.core.career_exploration,
    config.links.core.game_plan,
    config.links.core.general_resources,
    config.links.core.strategies_for_success
  ];

  // Career pathway
  if(answers.pathway){
    const arr=config.links.pathways[answers.pathway] || [];
    const filtered=arr.filter(x=>x.url);
    if(filtered.length){
      groups['Career Direction'] = filtered;
    }
  }

  // Professional materials
  const m=answers.materials||{};
  if(m.resume_ok==='not_confident'){
    const item=config.links.materials.resume;
    if(item.url){
      groups['Professional Materials'] ??=[];
      groups['Professional Materials'].push(item);
    }
  }
  if(m.cover_ok==='not_confident'){
    const item=config.links.materials.cover;
    if(item.url){
      groups['Professional Materials'] ??=[];
      groups['Professional Materials'].push(item);
    }
  }
  if(m.interview_ok==='not_confident'){
    const items=config.links.materials.interview.filter(x=>x.url);
    if(items.length){
      groups['Professional Materials'] ??=[];
      groups['Professional Materials'].push(...items);
    }
  }
  if(m.network_ok==='not_confident'){
    const items=config.links.materials.networking.filter(x=>x.url);
    if(items.length){
      groups['Professional Materials'] ??=[];
      groups['Professional Materials'].push(...items);
    }
  }
  if(m.jobsearch_ok==='not_confident'){
    const items=config.links.materials.jobsearch.filter(x=>x.url);
    if(items.length){
      groups['Professional Materials'] ??=[];
      groups['Professional Materials'].push(...items);
    }
  }

  // Research & academic engagement
  if(answers.research_interest==='research'){
    const items=config.links.pathways.research.filter(x=>x.url);
    if(items.length){
      groups['Research & Academic Engagement'] = items;
    }
  } else if(answers.research_interest==='grad_teach'){
    const items=[
      ...config.links.pathways.grad,
      ...config.links.pathways.research
    ].filter(x=>x.url);
    if(items.length){
      groups['Research & Academic Engagement'] = items;
    }
  }

  // Skills & self-development
  if(Array.isArray(answers.skills)){
    answers.skills.forEach(s=>{
      const item=config.links.selfdev[s];
      if(item && item.url){
        groups['Skills & Self-Development'] ??=[];
        groups['Skills & Self-Development'].push(item);
      }
    });
  }

  // Exploration & planning
  if(answers.planning){
    const arr=config.links.exploration[answers.planning] || [];
    const filtered=arr.filter(x=>x.url);
    if(filtered.length){
      groups['Exploration & Planning']=filtered;
    }
  }

  return groups;
}


// ----------- Render Results --------------
function renderResults(groups, answers){
  resultsEl.innerHTML='';

  const picked=document.createElement('p');
  picked.className='muted';
  picked.innerHTML = `<strong>Your selections:</strong> Year <span class="pill">${answers.year||'—'}</span> • Pathway <span class="pill">${answers.pathway||'—'}</span>`;
  resultsEl.appendChild(picked);

  if(Object.keys(groups).length===0){
    const p=document.createElement('p');
    p.className='muted';
    p.textContent='No recommendations yet.';
    resultsEl.appendChild(p);
    return;
  }

  for(const [g,items] of Object.entries(groups)){
    const sec=document.createElement('div');
    sec.className='group';
    const h=document.createElement('h4');
    h.textContent=g;
    sec.appendChild(h);

    items.forEach(it=>{
      const a=document.createElement('a');
      a.className='link';
      a.href=it.url;
      a.target='_blank';
      a.rel='noopener noreferrer';
      a.textContent=it.label;
      sec.appendChild(a);
    });

    resultsEl.appendChild(sec);
  }
}


// ----------- Buttons --------------
document.getElementById('submitBtn').addEventListener('click', (e)=>{
  e.preventDefault();
  const ans=getAnswers();
  const groups=buildRecommendations(ans);
  renderResults(groups, ans);
});

document.getElementById('resetBtn').addEventListener('click', ()=>{
  formEl.reset();
  resultsEl.innerHTML='';
});

document.getElementById('copyBtn').addEventListener('click', ()=>{
  const ans=getAnswers();
  const groups=buildRecommendations(ans);
  if(Object.keys(groups).length===0){ alert('No links to copy'); return; }
  const lines=[];
  for(const [g,items] of Object.entries(groups)){
    items.forEach(it=>lines.push(`${g}: ${it.label} — ${it.url}`));
  }
  navigator.clipboard.writeText(lines.join("\n")).then(()=>alert('Copied!'));
});

document.getElementById('downloadBtn').addEventListener('click', ()=>{
  const ans=getAnswers();
  const groups=buildRecommendations(ans);
  if(Object.keys(groups).length===0){ alert('No links'); return; }

  const rows=[['Group','Label','URL']];
  for(const [g,items] of Object.entries(groups)){
    items.forEach(it=>rows.push([g,it.label,it.url]));
  }
  const csv=rows.map(r=>r.map(x=>`"${x}"`).join(',')).join("\n");
  const blob=new Blob([csv],{type:'text/csv'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');
  a.href=url; a.download='links.csv'; a.click();
  URL.revokeObjectURL(url);
});
</script>
</body>
</html>
